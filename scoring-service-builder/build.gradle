apply plugin: "jetty"
apply plugin: "war"
apply plugin: "idea"

task wrapper(type: Wrapper) {
  gradleVersion = "2.7"
}

repositories {
   flatDir { dirs "lib" }
   mavenCentral()
}

dependencies {
    compile "javax.servlet:servlet-api:2.5"
    compile "commons-io:commons-io:2.4"
    compile "commons-fileupload:commons-fileupload:1.3.1"
    compile "com.google.code.gson:gson:2.6.2"
}

// compile to Java 1.7
sourceCompatibility = 1.6
targetCompatibility = 1.6

war {
    archiveName = "ROOT.war"
}
jettyRunWar {
    contextPath = ""
    httpPort = 55000
}


//-------------------------------------------------------------------
// Custom tasks for generating the model POJOs
//-------------------------------------------------------------------

task deleteTmp(type: Delete) {
    delete "tmp"
}

//-------------------------------------------------------------------
// Custom task for cleaning up generated files
//-------------------------------------------------------------------
task cleanGenerated(type: Delete) {
    delete "tmp",
            "makewar-extra.jar"
}

clean.dependsOn cleanGenerated
